<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  </head>

<body>
    <div>
      <p width="100%" align="center"><input id="on" onclick="on()" type="button" width="100%" value="ON"></p>
      <p align="center"><input id="off" onclick="off()" type="button" value="OFF"></p>
      <p align="center"><input id="hour" type="number">
      <input id="job" onclick="updateJob()" type="button" value="set JOB"></p>
      <p align="center">password : </p>
      <p align="center">  <input id="password" type="password"></p>
    </div>
</body>
<script>
function on() {
    post("/home/heat", {enable: true});
}
function off() {
    post("/home/heat", {enable: false});
}

function updateJob() {
    console.log("sending job");
    const hours = document.getElementById("hour");
    post('/home/job', {enable: true, hours: hours.value});
}

function post(url, data) {
    const password = document.getElementById("password");
    data["password"] = password;
    const d = JSON.stringify(data);
    var myHeaders = new Headers();
    myHeaders.append("Content-Type", "application/json");
    myHeaders.append("Content-Length", d.length.toString());

    fetch(url, {
      method: "POST",
      body: d,
      headers: myHeaders,
    });
}

</script>

</html>

